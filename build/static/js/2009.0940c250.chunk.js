"use strict";(self.webpackChunk_minimal_minimal_kit_react=self.webpackChunk_minimal_minimal_kit_react||[]).push([[2009],{42009:function(e,i,n){n.r(i),n.d(i,{default:function(){return oe}});var t=n(74165),r=n(15861),a=n(29439),o=n(6907),s=n(72791),l=n(57689),d=n(20803),c=n(88375),h=n(90166),u=n(96015),m=n(98246),x=n(38072),p=n(75193),Z=n(73379),f=n(94928),j=(n(6188),n(45336),n(58499)),b=n(1413),g=n(45953),v=n(48928),P=n(83423),w=n(4565),S=n(81872),C=n(82388),N=n(52007),I=n.n(N),y=n(51046),k=n(87884),E=n(33805),T=(n(6694),n(97043)),F=n(61091),A=n(58195),D=n(22892),V=n(44666),_=n(13811),R=n(45629),W=n(13609),B=n(43671),U=n(91267),q=n(74142),H=n(80184);function L(e){var i=e.EmpleadoId,n=e.Nombre,t=s.useState(!1),r=(0,a.Z)(t,2),o=r[0],l=r[1],d=function(){l(!1)},c=s.useState(""),h=(0,a.Z)(c,2),u=h[0],m=(h[1],(0,q.Z)().palette.mode,"#".concat(i,"#BalanceEmpleado")),x=[{field:"tipoPeticion",width:120,headerName:"Tipo de peticion",editable:!1,renderCell:function(e){return(0,T.Cs)(e.row.tipoPeticion)}},{field:"fechaCreacion",width:150,headerName:"Fecha de solicitud",editable:!1},{field:"Periodo",width:250,headerName:"Per\xedodo",editable:!1,renderCell:function(e){return(0,T.kA)(e.row.fechaInicioString,e.row.fechaFinString)}},{field:"diasTotales",width:90,headerName:"Total dias",editable:!1},{field:"estatus",width:120,headerName:"Estatus",editable:!1,renderCell:function(e){return(0,T.W5)(e.row.estatus)}},{field:"comentario",width:250,headerName:"Comentarios",editable:!1}],p=[{field:"vacacionesDisponibles",width:150,headerName:"Vacaciones"},{field:"diasPersonalesDisponibles",width:120,headerName:"Dias Personales",align:"center"},{field:"fechaInicioString",width:250,headerName:"Periodo",editable:!1,renderCell:function(e){return(0,T.kA)(e.row.fechaInicioString,e.row.fechaFinString)}},{field:"estatus",width:120,headerName:"Estatus",editable:!1,renderCell:function(e){return(0,T.W5)(e.row.estatus)}}];return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(F.Z,{variant:"contained",color:"primary",onClick:function(){l(!0)},children:[(0,H.jsx)(y.Z,{icon:"ci:show"}),"\xa0 Ver detalle"]}),(0,H.jsxs)(A.Z,{fullScreen:!0,open:o,onClose:d,children:[(0,H.jsx)(D.Z,{sx:{position:"relative"},children:(0,H.jsxs)(V.Z,{children:[(0,H.jsx)(_.Z,{edge:"start",color:"inherit",onClick:d,"aria-label":"close",children:(0,H.jsx)(k.Tw,{})}),(0,H.jsx)(w.Z,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:n})]})}),(0,H.jsxs)(R.Z,{sx:{p:3},children:[(0,H.jsxs)(W.Z,{children:[(0,H.jsx)(B.Z,{sx:{backgroundColor:"rgba(0, 0, 0, .03)"},expandIcon:(0,H.jsx)(y.Z,{icon:"material-symbols:keyboard-arrow-down-rounded"}),"aria-controls":"panel1a-content",id:"panel1a-header",children:(0,H.jsx)(w.Z,{children:"Historial de vacaciones"})}),(0,H.jsx)(U.Z,{children:(0,H.jsx)(w.Z,{children:(0,H.jsx)(f.Z,{EndPoint:E.F3,columns:x,refresh:u,genericParamAUX:m})})})]}),(0,H.jsxs)(W.Z,{children:[(0,H.jsx)(B.Z,{sx:{backgroundColor:"rgba(0, 0, 0, .03)"},expandIcon:(0,H.jsx)(y.Z,{icon:"material-symbols:keyboard-arrow-down-rounded"}),"aria-controls":"panel1a-content",id:"panel1a-header",children:(0,H.jsx)(w.Z,{children:"Periodos"})}),(0,H.jsx)(U.Z,{children:(0,H.jsx)(w.Z,{children:(0,H.jsx)(f.Z,{EndPoint:E.db,columns:p,refresh:u})})})]})]})]})]})}L.prototype={EmpleadoId:I().string,Nombre:I().string};var X=n(93433),z=n(40464),M=n(8440),O=n(59911),K=n(77248),G=n(61134),J=n(23943),Q=n(40268),Y=n(80362),$=n(99959),ee=n(23825),ie=n(5406);function ne(e){var i=e.NombreEmpleado,n=e.EmpleaodoId;console.log("este es el empelado Id ya en emodal",n);var o=(0,s.useState)(!1),l=(0,a.Z)(o,2),d=l[0],c=l[1],h=function(){c(!1)},u=(0,ee.Ds)().enqueueSnackbar,m=(0,s.useState)(!1),x=(0,a.Z)(m,2),p=(x[0],x[1],(0,s.useState)([])),Z=(0,a.Z)(p,2),f=Z[0],j=Z[1],b=(0,s.useCallback)((function(e){console.log("esto se ejecuta",f),j([].concat((0,X.Z)(f),(0,X.Z)(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))))}),[f]),v=(0,G.cI)({}),P=v.handleSubmit,w=(0,s.useState)([["nombre","comentario","fecha"]]),S=(0,a.Z)(w,2),C=(S[0],S[1]),N=(0,s.useState)(0),I=(0,a.Z)(N,2),y=I[0],k=I[1],T=(0,s.useState)(0),D=(0,a.Z)(T,2),V=D[0],_=D[1],R=(0,s.useState)(),W=(0,a.Z)(R,2),B=(W[0],W[1],function(){var e=(0,r.Z)((0,t.Z)().mark((function e(i){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=new FormData).append("tipoIncidencia",V),r.append("comentario",i.texto),r.append("EmpleadoSolicitante",n),r.append("diasTotales",y),f.forEach((function(e){r.append("archivos",e)})),(0,ie.A4)(r,E.XN,u,u);case 7:case"end":return e.stop()}}),e)})));return function(i){return e.apply(this,arguments)}}());return(0,s.useEffect)((function(){(0,ie._P)(E.qN,n,C)}),[n]),(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(F.Z,{variant:"outlined",color:"primary",onClick:function(e){c(!0)},children:[(0,H.jsx)(Q.Z,{icon:"material-symbols:new-window-rounded"})," \xa0 Solicitud especial"]}),(0,H.jsxs)(A.Z,{open:d,onClose:h,maxWidth:"sm",fullWidth:!0,children:[(0,H.jsx)(z.Z,{variant:"h5",color:"primary",children:"Detalles de petici\xf3n"}),(0,H.jsxs)(Y.ZP,{methods:v,onSubmit:P(B),children:[(0,H.jsxs)(M.Z,{children:[(0,H.jsx)("div",{children:i}),(0,H.jsx)("br",{}),(0,H.jsx)("div",{children:(0,H.jsxs)(g.ZP,{container:!0,spacing:3,children:[(0,H.jsx)(g.ZP,{item:!0,xs:12,md:6,children:(0,H.jsx)(J.Z,{endPointURL:E.mA,nameAUX:"tipoPeticion",label:"Tipo de petici\xf3n",placeholder:"Tipo de petici\xf3n",valorFiltro:"Vacaciones",useChange:!0,onChangeFunc:_})}),(0,H.jsx)(g.ZP,{item:!0,xs:12,md:6,children:(0,H.jsx)(O.Z,{type:"number",label:"Dias de la solicitud",onChange:function(e){k(e.target.value)},value:y,placeholder:"dias de permiso",onKeyPress:function(e){/[0-9]/.test(e.key)||e.preventDefault()}})})]})}),(0,H.jsx)("br",{}),(0,H.jsx)(Y.au,{name:"texto",id:"simple-editor",label:"Comentario",placeholder:"Ingresa tu comentario",multiline:!0,maxRows:4,fullWidth:!0}),(0,H.jsx)($.F,{files:f,onDrop:b,name:"archivo",sx:{border:1,width:1,height:40},onRemove:function(e){var i=f.filter((function(i){return i!==e}));j(i)}})]}),(0,H.jsxs)(K.Z,{children:[(0,H.jsx)(F.Z,{onClick:h,variant:"outlined",color:"error",children:"Cerrar"}),(0,H.jsx)(F.Z,{type:"submit",variant:"contained",color:"primary",children:"Aceptar"})]})]})]})]})}I().string,I().string,I().string;n(78462);function te(e){var i,n=0;for(i=0;i<e.length;i+=1)n=e.charCodeAt(i)+((n<<5)-n);var t="#";for(i=0;i<3;i+=1){t+="00".concat((n>>8*i&255).toString(16)).slice(-2)}return t}function re(){var e=s.useState([]),i=(0,a.Z)(e,2),n=i[0],t=i[1];return s.useEffect((function(){!function(){var e=E.sg+E.j4,i="Bearer ".concat(localStorage.getItem("accessToken")),n=localStorage.getItem("EmpleadoId");(0,C.Z)({method:"get",url:e,params:{liderId:n},headers:{Authorization:i}}).then((function(e){console.log("este es el response de axios",e.data),t(e.data)})).catch((function(){}))}()}),[]),(0,H.jsx)(g.ZP,{container:!0,spacing:3,children:n.map((function(e){return(0,H.jsx)(g.ZP,{item:!0,xs:12,md:4,children:(0,H.jsx)(ae,{Nombre:e.empleadoNombre,VacacionesTotal:e.vacacionesDisponibles,VacacionesActuales:e.vacacionesActuales,VacacionesAnteriores:e.vacacionesAnteriores,Personales:e.personalesDisponibles,Puesto:e.empleadoPuesto,EmpleadoId:e.empleadoId},e.id)})}))})}function ae(e){var i=e.Nombre,n=e.VacacionesTotal,t=e.VacacionesActuales,r=e.VacacionesAnteriores,o=e.Personales,l=e.Puesto,d=e.EmpleadoId;console.log("este es el empleadoId",d);var c,h=s.useState(""),m=(0,a.Z)(h,2);m[0],m[1];return(0,H.jsx)(H.Fragment,{children:(0,H.jsxs)(v.Z,{sx:{p:2},children:[(0,H.jsxs)(g.ZP,{container:!0,spacing:1,children:[(0,H.jsx)(g.ZP,{item:!0,md:2,sx:{pr:3},children:(0,H.jsx)(P.Z,(0,b.Z)({},(c=i,{sx:{bgcolor:te(c),color:"#fff"},children:"".concat(c.split(" ")[0][0]).concat(c.split(" ")[1][0])})))}),(0,H.jsxs)(g.ZP,{item:!0,md:10,children:[(0,H.jsxs)(w.Z,{variant:"subtitle1",color:"primary",children:[i," "]}),(0,H.jsxs)(u.Z,{sx:{display:"flex"},children:[(0,H.jsx)(w.Z,{variant:"subtitle2",children:"Puesto:\xa0"}),(0,H.jsx)(w.Z,{variant:"body2",children:l})]})]})]}),(0,H.jsx)(S.Z,{sx:{paddingTop:2}}),(0,H.jsxs)(g.ZP,{container:!0,spacing:2,sx:{paddingTop:2},children:[(0,H.jsx)(g.ZP,{item:!0,md:10,children:(0,H.jsx)(w.Z,{variant:"subtitle",color:"#007B55",children:"Vacaciones totales: \xa0 "})}),(0,H.jsx)(g.ZP,{item:!0,md:2,children:(0,H.jsx)(w.Z,{variant:"subtitle",color:"primary",children:n})})]}),0===r?(0,H.jsx)(g.ZP,{item:!0,sx:{height:0,with:0},children:"\xa0"}):(0,H.jsxs)(g.ZP,{container:!0,spacing:2,display:"flex",children:[(0,H.jsx)(g.ZP,{item:!0,md:10,children:(0,H.jsx)(w.Z,{variant:"body2",children:"D\xedas de periodos anteriores: \xa0"})}),(0,H.jsx)(g.ZP,{item:!0,md:2,children:(0,H.jsx)(w.Z,{variant:"subtitle2",children:r})})]}),(0,H.jsxs)(g.ZP,{container:!0,spacing:2,children:[(0,H.jsx)(g.ZP,{item:!0,md:10,children:(0,H.jsx)(w.Z,{variant:"body2",children:"D\xedas del per\xedodo actual: \xa0 "})}),(0,H.jsx)(g.ZP,{item:!0,md:2,children:(0,H.jsx)(w.Z,{variant:"subtitle2",children:t})})]}),(0,H.jsxs)(g.ZP,{container:!0,spacing:2,sx:{paddingTop:3},children:[(0,H.jsx)(g.ZP,{item:!0,md:10,children:(0,H.jsx)(w.Z,{variant:"subtitle",color:"#007B55",children:"D\xedas personales:\xa0"})}),(0,H.jsx)(g.ZP,{item:!0,md:2,children:(0,H.jsx)(w.Z,{variant:"subtitle",color:"primary",children:o})})]}),(0,H.jsxs)(g.ZP,{container:!0,sx:{paddingTop:3},spacing:1,children:[(0,H.jsx)(g.ZP,{item:!0,xs:7,md:7,children:(0,H.jsx)(ne,{EmpleaodoId:d,NombreEmpleado:i})}),(0,H.jsx)(g.ZP,{item:!0,xs:5,md:5,children:(0,H.jsx)(L,{EmpleadoId:d,Nombre:i})})]})]})})}function oe(){var e=[{value:"peticiones",label:"Peticiones",component:(0,H.jsx)(j.Z,{})},{value:"Resumen",label:"Balance",component:(0,H.jsx)(re,{})}],i=(0,s.useState)("peticiones"),n=(0,a.Z)(i,2),t=n[0],r=n[1],f=(0,s.useState)(!1),b=(0,a.Z)(f,2),g=(b[0],b[1],(0,s.useState)(null)),v=(0,a.Z)(g,2),P=(v[0],v[1],(0,s.useState)(p.PI)),w=(0,a.Z)(P,2),S=(w[0],w[1],(0,s.useState)("")),C=(0,a.Z)(S,2);C[0],C[1],(0,l.s0)(),(0,m.Ds)().enqueueSnackbar;return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(o.ql,{children:(0,H.jsx)("title",{children:" Peticiones "})}),(0,H.jsx)(d.Z,{children:(0,H.jsx)(Z.Z,{heading:(0,H.jsx)(H.Fragment,{children:"Peticiones"}),links:[{name:"Dashboard",href:x.vB.root},{name:"Peticiones"}]})}),(0,H.jsxs)(d.Z,{children:[(0,H.jsx)(c.Z,{value:t,onChange:function(e,i){return r(i)},children:e.map((function(e){return(0,H.jsx)(h.Z,{value:e.value,label:e.label},e.value)}))}),e.map((function(e){return e.value===t&&(0,H.jsx)(u.Z,{sx:{mt:5},children:e.component},e.value)}))]})]})}ae.prototype={Nombre:I().string,VacacionesTotal:I().string,VacacionesActuales:I().string,VacacionesAnteriores:I().string,Personales:I().string,Puesto:I().string,EmpleadoId:I().string}},45336:function(e,i,n){n.d(i,{Z:function(){return w}});var t=n(29439),r=n(72791),a=n(61091),o=n(48928),s=n(69963),l=n(87884),d=n(40268),c=n(94928),h=n(33805),u=(n(84954),n(6694)),m=n(58195),x=n(22892),p=n(44666),Z=n(13811),f=n(4565),j=n(45953),b=n(97043),g=n(80184);function v(){var e=(0,r.useState)(""),i=(0,t.Z)(e,2),n=i[0],o=(i[1],[{field:"id",headerName:"Id",flex:1,editable:!1,hide:!0},{field:"fechaCreacion",width:150,headerName:"Fecha de solicitud",editable:!1},{field:"tipoPeticion",width:120,headerName:"Tipo de peticion",editable:!1,renderCell:function(e){return(0,b.Cs)(e.row.tipoPeticion)}},{field:"Periodo",width:250,headerName:"Per\xedodo",editable:!1,renderCell:function(e){return(0,b.kA)(e.row.fechaInicioString,e.row.fechaFinString)}},{field:"diasTotales",align:"center",width:90,headerName:"Total dias",editable:!1},{field:"estatus",width:120,headerName:"Estatus",editable:!1,renderCell:function(e){return(0,b.W5)(e.row.estatus)}},{field:"comentario",width:250,headerName:"Comentarios",editable:!1}]),u=r.useState(!1),v=(0,t.Z)(u,2),P=v[0],w=v[1],S=function(){w(!1)};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(a.Z,{variant:"contained",onClick:function(){w(!0)},sx:{position:"fixed",right:0,top:"20%",borderRadius:"5px 0 0 5px",zIndex:2},startIcon:(0,g.jsx)(d.Z,{icon:"material-symbols:list-alt-outline"}),children:"Historial"}),(0,g.jsxs)(m.Z,{fullScreen:!0,open:P,onClose:S,children:[(0,g.jsx)(x.Z,{sx:{position:"relative"},children:(0,g.jsxs)(p.Z,{children:[(0,g.jsx)(Z.Z,{edge:"start",color:"inherit",onClick:S,"aria-label":"close",children:(0,g.jsx)(l.Tw,{})}),(0,g.jsx)(f.Z,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:"Historial de mis peticiones"})]})}),(0,g.jsx)(j.ZP,{sx:{padding:3},children:(0,g.jsx)(s.Z,{children:(0,g.jsx)(c.Z,{EndPoint:h.F3,columns:o,refresh:n})})})]})]})}var P=n(79707);function w(){var e=(0,r.useState)(""),i=(0,t.Z)(e,2),n=i[0],l=i[1],m=(0,r.useState)(""),x=(0,t.Z)(m,2),p=x[0],Z=x[1],f=(0,r.useState)(""),j=(0,t.Z)(f,2),w=j[0],S=j[1],C=(0,r.useState)(""),N=(0,t.Z)(C,2),I=N[0],y=N[1],k=(0,r.useState)(!1),E=(0,t.Z)(k,2),T=E[0],F=E[1],A=(0,r.useState)(""),D=(0,t.Z)(A,2),V=D[0],_=D[1],R=[{field:"action",headerName:"Acciones",align:"center",width:150,sortable:!1,filterable:!1,disableColumnMenu:!0,renderCell:function(e){return"1"===e.row.tipoPeticion||"2"===e.row.tipoPeticion||"3"===e.row.tipoPeticion||"4"===e.row.tipoPeticion?(0,g.jsx)(u.Z,{params:e,refreshFunc:_}):(0,g.jsxs)(a.Z,{color:"primary",onClick:function(i){return n=e.row.id,t=e.row.empleadoSolicitanteNombre,r=e.row.tipoPeticionEspecial,a=e.row.diasTotales,S(r),l(t),Z(n),y(a),void F(!0);var n,t,r,a},children:[(0,g.jsx)(d.Z,{icon:"ic:outline-remove-red-eye"}),"Ver detalles"]})}},{field:"fechaCreacion",width:150,headerName:"Fecha de solicitud",editable:!1},{field:"tipoPeticion",width:120,headerName:"Tipo de petici\xf3n",editable:!1,renderCell:function(e){return(0,b.Cs)(e.row.tipoPeticion)}},{field:"Periodo",width:250,headerName:"Per\xedodo",editable:!1,renderCell:function(e){return(0,b.kA)(e.row.fechaInicioString,e.row.fechaFinString)}},{field:"diasTotales",align:"center",width:90,headerName:"Total dias",editable:!1},{field:"estatus",width:120,headerName:"Estatus",editable:!1,renderCell:function(e){return(0,b.W5)(e.row.estatus)}},{field:"comentario",width:250,headerName:"Comentarios",editable:!1}];return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(v,{}),(0,g.jsx)(o.Z,{children:(0,g.jsx)(s.Z,{sx:{marginTop:"0px",position:"relative",overflow:"unset"},style:{width:"100%"},children:(0,g.jsx)(c.Z,{EndPoint:h.F3,columns:R,refresh:V})})}),(0,g.jsx)(P.Z,{NombreEmpleado:n,SolicitudId:p,refreshFunc:_,abrirModal:T,metodoCerrar:function(){F(!1)},tipoPeticionEspecial:w,diasTotales:I})]})}}}]);
//# sourceMappingURL=2009.0940c250.chunk.js.map